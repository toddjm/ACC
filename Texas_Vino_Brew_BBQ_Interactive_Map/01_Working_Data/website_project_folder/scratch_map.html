<!DOCTYPE html>
<html>
<head>
    <meta name="viewport">
    <title>regions_thc.shp - Google Fusion Tables</title>
    <style type="text/css">
        html, body, #googft-mapCanvas {
            height: 300px;
            margin: 0;
            padding: 0;
            width: 500px;
        }
    </style>

    <script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyAHGkPFonfvg2hBfafeHNarWxawRmAaP20&callback=initMap"></script>

    <script type="text/javascript">
        var RegionsTable = "13QXyoXiSdVrQpu7XUHbJUv8ePprRFjiL-FpCXFpK";
        var TrailsTable = "1o_WRWBupRVT42rV3FhrFg25sxvtvvSasPuzx7CtL";
        var RegionsLayer = new google.maps.FusionTablesLayer({
            map: map,
            heatmap: { enabled: false },
            query: {
                select: "col0",
                from: RegionsTable,
                where: ""
            },
            options: {
                styleId: 3,
                templateId: 3
            }
        });

        var TrailsLayer = new google.maps.FusionTablesLayer({
            map: map,
            heatmap: { enabled: false },
            query: {
                select: "col0",
                from: TrailsTable,
                where: ""
            },
            options: {
                styleId: 3,
                templateId: 3
            }
        });

        function initialize() {
            google.maps.visualRefresh = true;
            var isMobile = (navigator.userAgent.toLowerCase().indexOf('android') > -1) ||
                    (navigator.userAgent.match(/(iPod|iPhone|iPad|BlackBerry|Windows Phone|iemobile)/));
            if (isMobile) {
                var viewport = document.querySelector("meta[name=viewport]");
                viewport.setAttribute('content', 'initial-scale=1.0, user-scalable=no');
            }
            var mapDiv = document.getElementById('googft-mapCanvas');
            mapDiv.style.width = isMobile ? '100%' : '500px';
            mapDiv.style.height = isMobile ? '100%' : '300px';

            map = new google.maps.Map(mapDiv, {
                center: new google.maps.LatLng(31.319639241325053, -100.07709000000006),
                zoom: 6,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById('googft-legend-open'));
            map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(document.getElementById('googft-legend'));

            RegionsLayer.setMap(map);
            TrailsLayer.setMap(map);

            if (isMobile) {
                var legend = document.getElementById('googft-legend');
                var legendOpenButton = document.getElementById('googft-legend-open');
                var legendCloseButton = document.getElementById('googft-legend-close');
                legend.style.display = 'none';
                legendOpenButton.style.display = 'block';
                legendCloseButton.style.display = 'block';
                legendOpenButton.onclick = function() {
                    legend.style.display = 'block';
                    legendOpenButton.style.display = 'none';
                }
                legendCloseButton.onclick = function() {
                    legend.style.display = 'none';
                    legendOpenButton.style.display = 'block';
                }
            }
        }

        function changeLayer(tableidselections) {

            if (tableidselections == "13QXyoXiSdVrQpu7XUHbJUv8ePprRFjiL-FpCXFpK"){
                if (document.getElementById("regions").checked == true) {
                    if(RegionsLayer.getMap() == null) { RegionsLayer.setMap(map); }
                }

                if (document.getElementById("regions").checked == false) {
                    RegionsLayer.setMap(null);  /*layersetoff*/
                }

            }

            if (tableidselections == "1o_WRWBupRVT42rV3FhrFg25sxvtvvSasPuzx7CtL"){
                if (document.getElementById("trails").checked == true) {
                    if(TrailsLayer.getMap() == null) { TrailsLayer.setMap(map); }
                }

                if (document.getElementById("trails").checked == false) {
                    TrailsLayer.setMap(null); /*layersetoff*/
                }
            }

        }
        google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>

<body>
<div id="googft-mapCanvas"></div>
<div id="checkboxes">
    <form>
        <input type="checkbox" value="13QXyoXiSdVrQpu7XUHbJUv8ePprRFjiL-FpCXFpK" id="regions" onclick="changeLayer(this.value);" checked="checked">Regions</input><br />
        <input type="checkbox" value="1o_WRWBupRVT42rV3FhrFg25sxvtvvSasPuzx7CtL" id="trails" onclick="changeLayer(this.value);"checked="checked">Trails</input><br />
    </form>
</div>
</body>
</html>